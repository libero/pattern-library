{% set attributes = attributes|default({})|merge({class: attributes.class|default([])|merge(['content-header', 'wrapper']) }) %}

<header {%- include 'atoms-attributes' %}>

  {%- block body -%}

    {% if subjects.items is iterable %}

      {%- with subjects only -%}

        {% set attributes = attributes|default({})|merge({class: attributes.class|default([])|merge(['content-header__subject_list']) }) %}

        <ol {%- include 'atoms-attributes' %}>

          {% for subject in items %}

            {%- with subject only -%}

              {% set attributes = attributes|default({})|merge({class: attributes.class|default([])|merge(['content-header__subject_list_item']) }) %}

              <li {%- include 'atoms-attributes' %}>
                {% if url %}
                  <a href="{{ url }}" class="content-header__subject_link">
                {% endif %}
                <span class="content-header__subject">{%- include 'atoms-text' with {nodes: name.text} only -%}</span>
                {% if url %}
                  </a>
                {% endif %}
              </li>

            {%- endwith -%}

          {% endfor %}

        </ol>

      {%- endwith -%}

    {% endif %}

    {%- with contentTitle only -%}

      {%- block title -%}

        {% set length = include('atoms-heading')|striptags|trim|length %}

        {% if length < 20 %}
          {% set lengthClass = 'xx-short' %}
        {% elseif length < 36 %}
          {% set lengthClass = 'x-short' %}
        {% elseif length < 46 %}
          {% set lengthClass = 'short' %}
        {% elseif length < 57 %}
          {% set lengthClass = 'medium' %}
        {% elseif length < 80 %}
          {% set lengthClass = 'long' %}
        {% elseif length < 120 %}
          {% set lengthClass = 'x-long' %}
        {% else %}
          {% set lengthClass = 'xx-long' %}
        {% endif %}

        {% set attributes = attributes|default({})|merge({class: attributes.class|default([])|merge(['content-header__title', 'content-header__title--' ~ lengthClass]) }) %}
        {% set level = 1 %}

        {% include 'atoms-heading' %}

      {%- endblock -%}

    {%- endwith -%}

  {%- endblock -%}

</header>
